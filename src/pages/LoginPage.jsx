import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import { getUserStatus, setUserStatus } from "../utils/setUserStatus";
import styles from "./LoginPage.module.css";

export const LoginPage = ({ users, setLoggedInUserId }) => {
  const [selectedUser, setSelectedUser] = useState();
  const navigate = useNavigate();

  //store the selected user in the state
  const handleChange = event => {
    setSelectedUser(event.target.value);
  };

  //find out the selected user status and act accordingly
  const handleClickLogin = () => {
    const selectedUserStatus = getUserStatus(selectedUser);
    if (selectedUserStatus === "active") {
      console.log("User already logged in");
      return;
    }

    setUserStatus(selectedUser, "active");
    setLoggedInUserId(selectedUser);
    navigate("/leads");
  };

  return (
    <div className={`${styles.loginForm}`}>
      <div>
        <div className={` ${styles.loader} ${styles.loading}`}>
          <div className={`${styles.red}`}></div>
          <div className={`${styles.green}`}></div>
          <div className={`${styles.blue}`}>
            <img src="data:image/png;base64,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" />
          </div>
        </div>
        <form>
          <div className={`${styles.contentWrapperLogin}`}>
            <label className="p-3 text-center">
              Please select your username
            </label>
            <select onChange={handleChange}>
              <option value={undefined}>Select a user</option>
              {users.map((user, index) => (
                <option key={index} value={index}>
                  {user.name}
                </option>
              ))}
            </select>
            <button
              type="button"
              onClick={handleClickLogin}
              disabled={!selectedUser}
            >
              Login
            </button>
          </div>
        </form>
      </div>
    </div>
  );
};

